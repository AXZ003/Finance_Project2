<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Finanza</title>
    <!-- materialze link  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    <!-- tab and search icons  -->
    <link rel="shortcut icon" href="./images/f.jpg">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css" media="screen" title="no title">
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Inconsolata|Josefin+Slab|PT+Sans+Narrow|Playfair+Display+SC|Raleway|Source+Code+Pro" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Merriweather" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script src="./css/style.css"></script>
</head>

<body>

    <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
        <img class="logo" src="./images/goldcoin3.jpg"/>
        <a class="navbar-brand navName" href="home.html">Finanza</a>
        <button class="navbar-toggler hidden-lg-up" type="button" data-toggle="collapse" data-target="#collapsibleNavId" aria-controls="collapsibleNavId"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavId">
            <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                <li class="nav-item">
                    <a class="nav-link" href="/">Home </a>
                </li>
                <li class="nav-item">
                    <!-- <a class="nav-link" href="/portfolio">Portfolio</a> -->
                    <!-- Modal Trigger -->
					<a class="waves-effect waves-light modal-trigger nav-link" href="#modal1">Portfolio</a> 
					<!-- portfolio.html -->
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="/research">Research<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/logout">Log Out<span class="sr-only"></span></a>
                </li>
            </ul>
        </div>
    </nav>  

    <!-- MODAL W/ MATERIALIZE LOG IN AND REGISTER -->


	<!-- Modal Structure -->
	<div id="modal1" class="modal">
		<!-- <div class="modal-content"> -->
		  
			<!-- <div class="container white z-depth-2"> -->

				<ul class="tabs grey tabs-fixed-width tab-demo z-depth-1">
					<li class="tab col s3"><a class="white-text active" href="#login">login</a></li>
					<li class="tab col s3"><a class="white-text" href="#register">register</a></li>
				</ul>

				<div id="login" class="col s12">
					
					<div class="form-container">
						<br>
						<h3 class="text">Hello</h3>
						<br>
						<form id="signin" name="signin" method="post" action="/signin">
							<div class="row">
								<div class="input-field col s12">
									<input id="email" type="email" name="email" class="text">
									<label for="email">Email</label>
								</div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<input name="password" id="password" type="password" class="validate">
									<label for="password">Password</label>
								</div>
							</div>
							<br>
							<center>
								<button class="btn waves-effect waves-light grey" type="submit" name="action" value="Sign In">Sign In</button>
								<br>
								<br>
							</center>
						</form>
					</div>
			
				</div>


				<div id="register" class="col s12">
					
					<div class="form-container">
						<br>
						<h3 class="text">Welcome to Finanza</h3>
				
						<form id="signup" name="signup" method="post" action="/signup">
							<div class="row">
								<div class="input-field col s6">
									<input name="firstname" id="first_name" type="text" class="validate">
									<label for="firstname">First Name</label>
								</div>
								<div class="input-field col s6">
									<input name="lastname" id="last_name" type="text" class="validate">
									<label for="lastname">Last Name</label>
								</div>
							</div>
							<div class="row">
								<div class="input-field col s12">
									<input name="email" id="email" type="email" class="validate">
									<label for="email">Email</label>
								</div>
							</div>
						
							<div class="row">
								<div class="input-field col s12">
									<input name="password" id="password" type="password" class="validate">
									<label for="password">Password</label>
								</div>
							</div>
	
							<center>
								<button class="btn waves-effect waves-light grey" type="submit" value="SignUp" name="action">Sign Up</button>
								<br>
								<br>
				
								
							</center>
					    </form>
						</div>
					
				</div>
			<!-- </div> -->

		<!-- </div> -->
		
	</div>

<style>
    hr {
    display: block;
    height: 1px;
    border: 0;
    border-top: 1px solid #ccc;
    margin: 1em 0;
    padding: 0; 
}
</style>

    <div class="homepage-hero-module">
        <div class="video-container">
            <div class="filter"></div>

            <video autoplay="" preload="auto" muted="true" loop="" class="fillWidth fadeIn animated" style="    position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            overflow: hidden;
            z-index: -100;">
                <source src="./images/finance.mp4" type="video/mp4" />Your browser does not support the video tag. I suggest you upgrade your browser.
            </video>

            <div class="overlay" id="overlay1" style="top: 175px; background-color: rgb(53,58,63,.7); border-radius: 25px;">
                <h1 id="statement1" style="color: white">Researh</h1>
                <br>
                <!-- input search content -->
                <div class="container-fluid" id="overlay2">
                    <div class="input-group mb-3">
                        <input type="text" class="form-control"  placeholder="  Enter Stock Symbol" aria-label="Enter Stock Symbol" aria-describedby="basic-addon2" 
                            id='stockInput' style="text-transform: uppercase; width: 70%; background-color: white" onkeyup="this.value = this.value.toUpperCase();">
                        <div class="input-group-append">
                            <button class="btn btn-outline-secondary" type="button" id="stockSearch" style="color: white; border: solid 1px white; height: 46px; background-color: #2E3338">Search</button>
                        </div>
                    </div>
                    <br>

                    <div id="stockName"></div>
                
                <div class="row">
                    <div class="col">
                        <div class="tradingview-widget-container" style="margin-bottom: 20px">
                            <div id="tradingview_12ad5"></div>
                            <div class="tradingview-widget-copyright">
                            </div>
                            <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

                            <script type="text/javascript">
                                $('#stockSearch').on('click', function () {
                                    stockSearch = $('#stockInput').val().trim();
                                    $('#stockInput').html("Enter Stock");
                                    $('#statement1').hide();
                                    $('#stockName').html('');
                                    $('#colLeft').html('');
                                    $('#colRight').html('');
                                    $('.listResults').show('slow');
                                    var overlay = $('.overlay');
                                    overlay.attr('style',
                                        'max-width:100%; position: static; margin-top: 50px; height: fit-content; border: 1px solid white; padding: 10px;box-shadow: 5px 10px rgb(128, 128, 128, .2); background-color: rgb(53,58,63,.7); border-radius: 25px;'
                                    );


                                    var queryURL = 'https://api.iextrading.com/1.0/stock/' + stockSearch +
                                        '/book';


                                    $.ajax({
                                        url: queryURL,
                                        method: 'GET',
                                    }).then(function (response) {
                                        var symbol = response.quote.symbol;
                                        var name = response.quote.companyName;
                                        stockName = $('#stockName');
                                        div = $('<div>');
                                        stockName.append(div);
                                        div.attr('style',
                                            'color: #353A3F; text-align: center; font-size: 20pt; background-color: white; border-radius: 25px)'
                                        )
                                        div.append('<p>' + name.toUpperCase() + '</p>')

                                        var pClose = response.quote.previousClose;
                                        previousClose = $('#previousClose');
                                        divOne = $('<div>');
                                        previousClose.append(divOne);
                                        divOne.append('<p>' + pClose + '</p>');


                                        // dynamic menu column left

                                        var colLeft = $('#colLeft');
                                        var divCol = $('<div>');
                                        var ulOne = $('<ul>');
                                        ulOne.attr('style', 'list-style-type:none')
                                        var liOne = $(
                                            '<li>' + 'Open: ' + '<b>' + response.quote.open +
                                            '</b></li><hr><li>' + 'Close: ' + response.quote.close +
                                            '</li><hr><li>' + 'High: ' + response.quote.high +
                                            '</li><hr><li>' + 'Low: ' + response.quote.low +
                                            '</li><hr><li>' + 'Latest Price: $' + response.quote.latestPrice +
                                            '</li><hr><li>' + 'Change Percentage: ' + response.quote
                                            .changePercent.toFixed(2) * 100 + '%' + '</li><hr><li>' +
                                            'Week 52 High: $' + response.quote.week52High +
                                            '</li><hr><li>' + 'Week 52 Low: $' + response.quote.week52Low +
                                            '</li><hr>');
                                        divCol.append(ulOne);
                                        ulOne.append(liOne);
                                        colLeft.append(divCol);

                                        // dynamic menu column right

                                        var colLeft = $('#colRight');
                                        var colDiv = $('<div>');
                                        var ulTwo = $('<ul>');
                                        ulTwo.attr('style', 'list-style-type:none')
                                        var liTwo = $(
                                            '<li>' + 'Latest Volume: ' + '<b>' + response.quote.latestVolume +
                                            '</b></li><hr><li>' + 'Average Total Volume: ' +
                                            response.quote.avgTotalVolume + '</li><hr><li>' +
                                            'PE Ratio: ' + response.quote.peRatio + '</li><hr><li>' +
                                            'Extended Price: $' + response.quote.extendedPrice +
                                            '</li><hr><li>' + 'Extended Change: ' + response.quote.extendedChange +
                                            '</li><hr><li>' + 'Extended Change Percentage: ' +
                                            response.quote.extendedChangePercent.toFixed(2) * 100 +
                                            '%' + '</li><hr><li>' + 'Market Cap: ' + response.quote
                                            .marketCap + '</li><hr><li>' + 'YTD Change: ' +
                                            response.quote.ytdChange.toFixed(2) * 100 + '%' +
                                            '</li><hr>');
                                            liTwo.attr('style', 'padding-top: 2px');
                                        colDiv.append(ulTwo);
                                        ulTwo.append(liTwo);
                                        colLeft.append(colDiv);

                                    });

                                    new TradingView.widget({
                                        "width": '100%',
                                        "height": '100%',
                                        "symbol": stockSearch,
                                        "interval": "D",
                                        "timezone": "Etc/UTC",
                                        "theme": "Light",
                                        "style": "1",
                                        "locale": "en",
                                        "toolbar_bg": "#353A3F",
                                        "enable_publishing": false,
                                        "hide_top_toolbar": true,
                                        "allow_symbol_change": true,
                                        "container_id": "tradingview_12ad5"
                                    });

                                });
                                $('#stockInput').keypress(function(e){
                                    if(e.which == 13){
                                        $('#stockSearch').click();
                                    }
                            });
                            </script>
                        </div>
                        <!-- Graph Chart END -->

                    </div>
                    <div class="col-lg-3 listResults" style="display: none; list-style-type: none; text-align: center; font-size:12pt; text-align: center; font-family: 'Merriweather', serif; ; color: white"
                        id="colLeft">
                    </div>
                    <div class="listResults col col-lg-3" style="display: none; list-style-type: none; text-align: center; font-family: 'Merriweather', serif; text-shadow: black; color: white;"
                        id='colRight'>
                    </div>
                </div>
            </div>

                <!-- row Ends -->

            </div>
            <!-- <div class="row" id="ticker" style="position: fixed; bottom: 0; width: 100%; margin: 0">

                <script src="https://widgets.freestockcharts.com/script/WBIHorizontalTicker2.js?ver=12334" type="text/javascript"></script>
                <link href="https://widgets.freestockcharts.com/WidgetServer/WBITickerblue.css" rel="stylesheet" type="text/css" />
                <script>

                    
                    var gainerTick = new WBIHorizontalTicker('gainers');
                    gainerTick.start();
                    var loserTick = new WBIHorizontalTicker('losers');
                    loserTick.start();
                </script>
            </div> -->

        </div>

    </div>


    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>


    <script type="text/javascript" src="js/materialize.min.js"></script>

    <script>  
		$(document).ready(function(){
			$('.modal').modal();
		});
		
		$(document).ready(function(){
   			 $('.tabs').tabs();
		});
		
    </script>
</body>

</html>