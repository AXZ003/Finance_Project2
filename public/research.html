<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Finanza</title>
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css" media="screen" title="no title">
    <link rel="shortcut icon" href="./images/f.jpg">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Inconsolata|Josefin+Slab|PT+Sans+Narrow|Playfair+Display+SC|Raleway|Source+Code+Pro"
        rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Anton" rel="stylesheet">
    <script src="./js/research.js"></script>
</head>

<body>

    <!-- NAVBAR -->

    <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
        <img class="logo" src="./images/silverdollar.gif" />
        <a class="navbar-brand navName" href="home.html">Finanza</a>
        <button class="navbar-toggler hidden-lg-up" type="button" data-toggle="collapse" data-target="#collapsibleNavId" aria-controls="collapsibleNavId"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavId">
            <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                <li class="nav-item active">
                    <a class="nav-link" href="/">Home
                        <span class="sr-only">(current)</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/portfolio">Portfolio</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/research">Research</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Video Container -->

    <div class="homepage-hero-module">
        <div class="video-container">
            <div class="filter"></div>

            <video autoplay="" preload="auto" muted="true" loop="" class="fillWidth fadeIn animated" style="    position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            overflow: hidden;
            z-index: -100;">
                <source src="./images/finance.mp4" type="video/mp4" />Your browser does not support the video tag. I suggest you upgrade your browser.
            </video>

            <div class="overlay" id="overlay1" style="margin-top: 25px;">
                <div class="coin" id="coin"></div>
                <h1 id="statement1">Researh</h1>
                <br>
                <!-- input search content -->
                <div class="container" id="overlay2">
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" placeholder="Enter Stock Symbol" aria-label="Enter Stock Symbol" aria-describedby="basic-addon2"
                            id='stockInput' style="text-transform: uppercase" onkeyup="this.value = this.value.toUpperCase();">
                        <div class="input-group-append">
                            <button class="btn btn-outline-secondary" type="button" id="stockSearch" style="color: white; border: solid 1px white;">Search</button>
                        </div>
                    </div>
                    <br>
                    
                    <div id="stockName"></div>
                </div>
                    <div class="row">
                        <div class="col">
                            <div class="tradingview-widget-container" style="margin-bottom: 20px">
                                <div id="tradingview_12ad5"></div>
                                <div class="tradingview-widget-copyright">
                                    <!-- <a href="https://www.tradingview.com/symbols/NASDAQ-AAPL/" rel="noopener" target="_blank"> -->
                                </div>
                                <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
                                
                                <script type="text/javascript">
                                
                                
                                    $('#stockSearch').on('click', function () {
                                        stockSearch = $('#stockInput').val().trim();
                                        $('#statement1').hide();
                                        $('#stockName').html('');
                                        $('#colLeft').html('');
                                        $('#colRight').html('');
                                        $('.listResults').show('slow');
                                        var overlay = $('.overlay');
                                        overlay.attr('style',
                                            'max-width:100%; bottom:0px; border-radius: 10px;     border: 1px solid; padding: 10px;box-shadow: 5px 10px rgb(128, 128, 128, .2);'
                                        );

                                        
                                        
                                        
                                        var queryURL = 'https://api.iextrading.com/1.0/stock/' + stockSearch +
                                            '/book';


                                        $.ajax({
                                            url: queryURL,
                                            method: 'GET',
                                        }).then(function (response) {
                                            var symbol = response.quote.symbol;
                                            var name = response.quote.companyName;
                                            stockName = $('#stockName');
                                            div = $('<div>');
                                                stockName.append(div);
                                                div.attr('style', 'color:white; text-align: center; font-size: 20pt; background-color: rgb(46, 51, 56, .5')
                                                div.append('<p>' + name.toUpperCase() + '</p>')
                                            
                                            var pClose = response.quote.previousClose;
                                                previousClose = $('#previousClose');
                                                divOne = $('<div>');
                                                previousClose.append(divOne);
                                                divOne.append('<p>' + pClose + '</p>');


                                        // dynamic menu column left

                                        var colLeft = $('#colLeft');
                                        var divCol = $('<div>');
                                        var ulOne = $('<ul>');
                                        ulOne.attr('style', 'list-style-type:none')
                                        var liOne = $(
                                            '<li>' + 'Open: ' + '<b>' + response.quote.open + '</b></li><hr><li>' + 'Close: ' + response.quote.close + '</li><hr><li>' + 'High: ' + response.quote.high + '</li><hr><li>' + 'Low: ' + response.quote.low + '</li><hr><li>' + 'Latest Price: $' + response.quote.latestPrice + '</li><hr><li>' + 'Change Percentage: ' + response.quote.changePercent.toFixed(2) * 100 + '%' + '</li><hr><li>' + 'Week 52 High: $' + response.quote.week52High + '</li><hr><li>' + 'Week 52 Low: $' + response.quote.week52Low + '</li><hr>');
                                        divCol.append(ulOne);
                                        ulOne.append(liOne);
                                        colLeft.append(divCol);

                                        // dynamic menu column right

                                        var colLeft = $('#colRight');
                                        var colDiv = $('<div>');
                                        var ulTwo = $('<ul>');
                                        ulTwo.attr('style', 'list-style-type:none')
                                        var liTwo = $(
                                            '<li>' + 'Latest Volume: ' + '<b>' + response.quote.latestVolume + '</b></li><hr><li>' + 'Average Total Volume: ' + response.quote.avgTotalVolume + '</li><hr><li>' + 'PE Ratio: ' + response.quote.peRatio + '</li><hr><li>' + 'Extended Price: $' + response.quote.extendedPrice + '</li><hr><li>' + 'Extended Change: ' + response.quote.extendedChange + '</li><hr><li>' + 'Extended Change Percentage: ' + response.quote.extendedChangePercent.toFixed(2) * 100+ '%' + '</li><hr><li>' + 'Market Cap: ' + response.quote.marketCap + '</li><hr><li>' + 'YTD Change: ' + response.quote.ytdChange.toFixed(2) * 100 + '%' + '</li><hr>');
                                        colDiv.append(ulTwo);
                                        ulTwo.append(liTwo);
                                        colLeft.append(colDiv);
                                        
                                        });

                                        new TradingView.widget({
                                            "width": 675,
                                            "height": 475,
                                            "symbol": stockSearch,
                                            "interval": "D",
                                            "timezone": "Etc/UTC",
                                            "theme": "Light",
                                            "style": "1",
                                            "locale": "en",
                                            "toolbar_bg": "#f1f3f6",
                                            "enable_publishing": false,
                                            "hide_top_toolbar": true,
                                            "allow_symbol_change": true,
                                            "container_id": "tradingview_12ad5"
                                        });
                                        // $('#stockInput').val() = '';


                                    });
                                </script>
                            </div>
                            <!-- Graph Chart END -->
                            
                        </div>
                        <div class="col-md-3 listResults" style="display: none; list-style-type: none; text-align: left; font-size:12pt; text-align: center; font-family: 'Anton', sans-serif; ; color: #28666E" id="colLeft">
                                <!-- <ul style="list-style-type:none">
                                    <li id="previousClose" style="display: inline-block">Previous Close</li>
                                    <li>Open</li><p id="previousClose"></p>
                                    <li>Bid</li><p id="previousClose"></p>
                                    <li>Ask</li><p id="previousClose"></p>
                                    <li>Day's Range</li><p id="previousClose"></p>
                                    <li>52 Week Range</li><p id="previousClose"></p>
                                    <li>Volume</li><p id="previousClose"></p>
                                    <li>Average Volume</li><p id="previousClose"></p>

                                   
                                </ul> -->
                            </div>
                            <div class="listResults col col-lg-3" style="display: none; list-style-type: none; text-align: center; font-family: 'Anton', sans-serif; ; text-shadow: black; color: #28666E" id='colRight'>
                            </div>
                    </div>
                    
                    
                    <!-- row Ends -->
                
            </div>
            <div class="row" id="ticker" style="position: fixed; bottom: 0; width: 100%; margin: 0">

                <!-- START Worden Top Gainers and Losers Ticker Widget -->
                <script src="http://widgets.freestockcharts.com/js/jquery-1.3.1.min.js" type="text/javascript"></script>
                <script src="http://widgets.freestockcharts.com/script/WBIHorizontalTicker2.js?ver=12334" type="text/javascript"></script>
                <link href="http://widgets.freestockcharts.com/WidgetServer/WBITickerblue.css" rel="stylesheet" type="text/css" />
                <script>
                    var gainerTick = new WBIHorizontalTicker('gainers');
                    gainerTick.start();
                    var loserTick = new WBIHorizontalTicker('losers');
                    loserTick.start();
                </script>
                <!-- End Scrolling Ticker Widget -->
            </div>

        </div>

    </div>


    <!-- input search content -->
    <!-- <div class="container">
    <div class="input-group mb-3">
            <input type="text" class="form-control" placeholder="Enter Stock Symbol" aria-label="Enter Stock Symbol" aria-describedby="basic-addon2" id='stockInput' style="text-transform: uppercase" onkeyup="this.value = this.value.toUpperCase()">
            <div class="input-group-append">
              <button class="btn btn-outline-secondary" type="button" id="stockSearch">Search</button>
            </div>
          </div> <br> <br> -->


    <!-- Top graphic -->



    <!-- Graph Chart Begins -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

</body>

</html>